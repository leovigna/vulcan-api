// output   = "../src/generated/client"
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url = "***"
}

model Operator {
  id   Int    @default(autoincrement()) @id
  name String
}

model ContractDefinition {
  id             Int        @default(autoincrement()) @id
  compilerOutput String
  contracts      Contract[]
}

model Contract {
  address   String              @id
  networkId String
  events    EventType[]         @relation("EventContracts", references: [name])
  spec      ContractDefinition? @relation(fields: [specId], references: [id])
  specId    Int?
}

model EventType {
  name      String     @id
  contracts Contract[] @relation("EventContracts", references: [address])
}

model Event {
  id               String            @id
  returnValues     String?
  event            String?
  signature        String?
  logIndex         Int?
  transactionIndex Int?
  transactionHash  String?
  blockHash        String?
  blockNumber      Int?
  address          String?
  contract         Contract?         @relation("ContractEvents", fields: [address], references: [address])
  oracleAggregator OracleAggregator? @relation("OracleAggregatorEvents", fields: [address], references: [contractAddress])
}

model OracleAggregator {
  contractAddress    String   @id
  contract           Contract @relation("OracleContracts", fields: [contractAddress], references: [address])
  title              String
  path               String
  answerRenderFormat String
}